import{d as B,u as S,a as F,r as C,b as V,c as I,m as g,e as A,f as D,g as N,o as P,h as R,i as j,j as n,w as q,k as u,t as f,l as E,n as m,p as M,q as $,s as G,A as w,v as p,x as T,y as U}from"./index.90662b97.js";import z from"./index.8d5f3ca4.js";const K={class:"login"},L={class:"flex flex-row-reverse"},Y={class:"flex flex-row justify-center space-x-1 items-center"},H={class:"text-center"},J={class:"text-center"},X=B({__name:"login",setup(O){const r=M(),d=S();F();const _=C({}),{t:s}=V(),b=I([{label:s("layout.login.username"),prop:"username",component:"el-input",rules:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"},props:{clearable:!0,prefixIcon:g($),placeholder:s("layout.login.placeholder.username"),class:"bg-blue-100"}},{label:s("layout.login.password"),prop:"password",component:"el-input",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:5,max:16,message:"\u957F\u5EA6 5 \u5230 16 \u4E2A\u5B57\u7B26",trigger:"blur"}],props:{type:"password",clearable:!0,showPassword:!0,prefixIcon:g(G),placeholder:s("layout.login.placeholder.password")}}]),h=A({submitText:s("layout.login.submit"),reset:!1}),a=D({username:"",password:""}),v=T(async(e,i)=>{var l;const o=await _.value.validate();if(console.log(o),o){let c=new URLSearchParams(a);const{data:t,execute:k}=U(w.login,c);await k(),t.value&&(d.value.access_token=t.value.access_token,d.value.token_type=(l=t.value)==null?void 0:l.token_type,await r.push("/"),r.go(0))}e()}),{data:y,execute:x}=N(w.initState);return P(async()=>{var e;await x(),(e=y.value)!=null&&e.switch&&await r.push("/init")}),(e,i)=>{const o=p("el-image"),l=p("pro-form"),c=p("el-card");return R(),j("div",K,[n(c,{class:"w-3/12 max-w[90%] login-button bg-white/0"},{default:q(()=>[u("div",L,[n(z)]),u("div",Y,[n(o,{style:{width:"32px",height:"32px"},src:"https://gw.alipayobjects.com/zos/antfincdn/PmY%24TNNDBI/logo.svg",fit:"cover"}),u("h2",H,f(e.$t("layout.login.title")),1)]),u("h5",J,f(e.$t("layout.login.describe")),1),n(l,{ref_key:"login",ref:_,modelValue:a,"onUpdate:modelValue":i[0]||(i[0]=t=>E(a)?a.value=t:null),columns:m(b),menu:m(h),"label-position":"top",onSubmit:m(v)},null,8,["modelValue","columns","menu","onSubmit"])]),_:1})])}}});export{X as default};
