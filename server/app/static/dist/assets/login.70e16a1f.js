import{d as k,u as B,r as F,a as I,R as V,m as g,z as A,b as R,c as S,o as $,e as C,f as N,g as l,w as P,h as n,t as f,i as c,j,k as z,l as D,A as w,n as p,$ as E,p as q}from"./index.305d1985.js";import G from"./index.acdbe209.js";const T={class:"login"},U={class:"flex flex-row-reverse"},L={class:"flex flex-row justify-center space-x-1 items-center"},M={class:"text-center"},Y={class:"text-center"},O=k({__name:"login",setup(H){const m=j(),d=B(),_=F({}),{t:e}=I(),b=V([{label:e("layout.login.username"),prop:"username",component:"el-input",rules:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"},props:{clearable:!0,prefixIcon:g(z),placeholder:e("layout.login.placeholder.username"),class:"bg-blue-100"}},{label:e("layout.login.password"),prop:"password",component:"el-input",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:5,max:16,message:"\u957F\u5EA6 5 \u5230 16 \u4E2A\u5B57\u7B26",trigger:"blur"}],props:{type:"password",clearable:!0,showPassword:!0,prefixIcon:g(D),placeholder:e("layout.login.placeholder.password")}}]),h=A({submitText:e("layout.login.submit"),reset:!1}),r=R({username:"",password:""}),v=E(async(o,u)=>{var a;const t=await _.value.validate();if(console.log(t),t){let i=new URLSearchParams(r);const{data:s,execute:y}=q(w.login,i);await y(),s.value&&(d.value.access_token=s.value.access_token,d.value.token_type=(a=s.value)==null?void 0:a.token_type,await m.push("/"),m.go(0))}o()}),{execute:x}=S(w.init);return $(async()=>{await x()}),(o,u)=>{const t=p("el-image"),a=p("pro-form"),i=p("el-card");return C(),N("div",T,[l(i,{class:"w-3/12 max-w[90%] login-button bg-white/0"},{default:P(()=>[n("div",U,[l(G)]),n("div",L,[l(t,{style:{width:"32px",height:"32px"},src:"https://gw.alipayobjects.com/zos/antfincdn/PmY%24TNNDBI/logo.svg",fit:"cover"}),n("h2",M,f(o.$t("layout.login.title")),1)]),n("h5",Y,f(o.$t("layout.login.describe")),1),l(a,{ref_key:"login",ref:_,modelValue:r,"onUpdate:modelValue":u[0]||(u[0]=s=>r=s),columns:c(b),menu:c(h),"label-position":"top",onSubmit:c(v)},null,8,["modelValue","columns","menu","onSubmit"])]),_:1})])}}});export{O as default};
