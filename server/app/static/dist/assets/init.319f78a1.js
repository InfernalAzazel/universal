import{d as I,b as B,u as $,r as m,m as l,e as z,g as u,D as A,o as F,h as G,i as M,j as a,w as c,k as d,t as N,n as f,p as R,A as s,v as i,x as E}from"./index.90662b97.js";import P from"./index.8d5f3ca4.js";import r from"./index.3d69d414.js";const T={class:"bg-image"},U={class:"flex flex-row-reverse"},q={class:"mb-2 text-center"},O=I({__name:"init",setup(H){const{t}=B(),p=R();$();const _=m({}),h=[{component:l(r),prop:"null",props:{title:t("layout.init.form.shared")}},{prop:"shared.tz_info",component:"el-input",props:{placeholder:t("layout.init.form.placeholder"),slots:{prepend:t("layout.init.form.shared.tz_info")}}},{component:l(r),prop:"null",props:{title:t("layout.init.form.mongodb")}},{prop:"mongodb.host",component:"el-input",props:{placeholder:t("layout.init.form.placeholder"),slots:{prepend:t("layout.init.form.mongodb.host")}}},{prop:"mongodb.username",component:"el-input",props:{placeholder:t("layout.init.form.placeholder"),slots:{prepend:t("layout.init.form.mongodb.username")}}},{prop:"mongodb.password",component:"el-input",props:{placeholder:t("layout.init.form.placeholder"),slots:{prepend:t("layout.init.form.mongodb.password")}}},{component:l(r),prop:"null",props:{title:t("layout.init.form.jwt")}},{prop:"jwt.secret_key",component:"el-input",props:{placeholder:t("layout.init.form.placeholder"),slots:{prepend:t("layout.init.form.jwt.secret_key")}}},{prop:"jwt.algorithm",component:"el-input",props:{placeholder:t("layout.init.form.placeholder"),slots:{prepend:t("layout.init.form.jwt.algorithm")}}},{prop:"jwt.minutes",component:"el-input",props:{placeholder:t("layout.init.form.placeholder"),type:"number",slots:{prepend:t("layout.init.form.jwt.minutes")}}}],y=z({submit:!0,submitText:t("layout.init.form.submit"),reset:!1}),o=m({}),{data:b,execute:w}=u(s.initState),{data:g,execute:x}=u(s.initData),{data:v,execute:S}=A(s.initSystem,o),j=E(async(e,n)=>{n&&(await S(),v.value&&await p.push("/login")),e()});return F(async()=>{var e;await w(),await x(),((e=b.value)==null?void 0:e.switch)!==!0?await p.push("/login"):o.value=g.value}),(e,n)=>{const k=i("pro-form"),D=i("el-scrollbar"),V=i("el-card");return G(),M("div",T,[a(V,{class:"w-3/12 max-w[90%] bg-white/0"},{default:c(()=>[d("div",U,[a(P)]),d("h2",q,N(e.$t("layout.init.title")),1),a(D,{class:"w-full",style:{height:"600px"}},{default:c(()=>[a(k,{ref_key:"login",ref:_,class:"init_button pro-form",modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=C=>o.value=C),columns:h,menu:f(y),"label-position":"top",onSubmit:f(j)},null,8,["modelValue","menu","onSubmit"])]),_:1})]),_:1})])}}});export{O as default};
