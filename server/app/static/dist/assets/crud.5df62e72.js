import{r as a,b as R,c as F,p as G,Q as S,S as U,i as h,_ as V,U as C,V as E}from"./index.305d1985.js";function k(v,f=!1){const l=a([]),{isFetching:n,data:c,execute:o}=F(v),s=async()=>{n.value||(await o(),c.value&&(l.value=c.value))};return h(f)&&s(),{list:l,loadAll:s,isFetching:n}}function q(v,f,l,n,c=!1){const o=a({}),s=R({uid:""}),x=a(1),w=a(10),p=a([]),_=a(0),r=a({}),d=a({current_page:x.value,page_size:w.value}),{isFetching:m,data:g,execute:b}=F(v,d),{execute:y}=G(f,r),{execute:z}=S(l,r),{execute:A}=U(n,s),u=async()=>{m.value||(d.value.current_page=x.value,d.value.page_size=w.value,await b(),g.value&&(p.value=g.value.data,_.value=g.value.total))};h(c)&&u();const D=V((e,t,i)=>{t==="edit"?r.value=i||{}:t==="detail"&&(o.value=i||{}),e()}),L=C(async(e,t,i)=>{t&&await u(),e()}),P=E(async(e,t,i,O,Q)=>{i==="add"?(await y(),e(),t()):i==="edit"&&(await z(),e(),t()),await u()});return{form:r,serachForm:d,detail:o,loadList:u,currentPage:x,pageSize:w,list:p,total:_,isFetching:m,currentRowID:s,beforeOpen:D,submit:P,search:L,deleteRow:async e=>{s.uid=e.uid,await A(),await u()}}}export{k as a,q as u};
