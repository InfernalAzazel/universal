import{d as E,b as I,u as G,Q,r as z,R as X,m as K,A as _,h as c,z as b,w as o,S as W,n as a,l as h,j as T,B as u,t as i,i as B,k as m,v as p,U as Z,X as ee}from"./index.90662b97.js";import{u as te}from"./crud.6c5008af.js";import ae from"./index.0b0ba6df.js";const se={key:0},oe={class:"text-red-600"},re={key:1},le=u("ID: "),ne=u("Name: "),pe=E({__name:"index",setup(ie){const{t:e}=I(),S=G(),$=Q({label:e("crud.label"),addText:e("crud.addText"),detailText:e("crud.detailText"),editText:e("crud.editText"),searchText:e("crud.searchText"),searchResetText:e("crud.searchResetText"),submitText:e("crud.submitText"),resetText:e("crud.resetText"),detail:!0,edit:!0,del:!1,searchReset:!0,fixed:"right",width:"200"}),M=z([{value:!0,label:e("selectBool.true")},{value:!1,label:e("selectBool.false")}]),Y=X([{label:e("system.users.id"),prop:"id",component:"el-input",detail:!0,props:{disabled:!0},width:"200"},{label:e("system.users.username"),prop:"username",component:"el-input",form:!0,search:!0,detail:!0,width:"200"},{label:e("system.users.name"),prop:"name",component:"el-input",detail:!0,width:"200"},{label:e("system.users.mail"),prop:"mail",component:"el-input",search:!0,detail:!0,width:"200"},{label:e("system.users.company"),prop:"company",component:"el-input",detail:!0,width:"200"},{label:e("system.users.department"),prop:"department",component:"el-input",detail:!0,width:"200"},{label:e("system.users.disabled"),prop:"disabled",component:"pro-select",form:!0,search:!0,detail:!0,props:{data:M.value},width:"200"},{label:e("system.users.association_role"),prop:"association_role",component:K(ae),search:!0,form:!0,detail:!0,width:"200"},{label:e("el-date-picker.create_at"),prop:"create_at",component:"el-date-picker",props:{type:"datetimerange",rangeSeparator:"-",startPlaceholder:"start",endPlaceholder:"end",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DDTHH:mm:ss"},search:!0,detail:!0,width:"200"},{label:e("el-date-picker.update_at"),prop:"update_at",component:"el-date-picker",props:{type:"datetimerange",rangeSeparator:"-",startPlaceholder:"start",endPlaceholder:"end",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DDTHH:mm:ss"},search:!0,detail:!0,width:"200"}]),f=z(JSON.parse(JSON.stringify(Y))),R={username:{required:!0,message:e("rules.users.username"),trigger:"blur"},disabled:{required:!0,message:e("rules.users.disabled"),trigger:"blur"},association_role:{required:!0,message:e("rules.users.association_role"),trigger:"blur"}},{form:g,serachForm:l,detail:V,loadList:v,currentPage:y,pageSize:x,list:N,total:U,isFetching:F,beforeOpen:O,submit:P,deleteRow:H}=te(_.usersList,_.usersAdd,_.usersEdit,_.usersDelete,!0),J=ee(async(d,s,k)=>{if(s){let n=JSON.parse(JSON.stringify(l.value)),w={association_role:n.association_role};n.association_role&&(n.association_role_id=n.association_role.id,delete n.association_role,l.value=n,console.log(l.value)),await v(),l.value={...l.value,...w}}d()}),L=async()=>{l.value={},await v()};return(d,s)=>{const k=p("pro-column-setting"),n=p("el-button"),w=p("el-popconfirm"),D=p("el-tag"),q=p("pro-crud"),A=p("pro-card"),j=Z("loading");return c(),b(A,{shadow:"never"},{default:o(()=>[W((c(),b(q,{modelValue:a(g),"onUpdate:modelValue":s[1]||(s[1]=t=>h(g)?g.value=t:null),search:a(l),"onUpdate:search":s[2]||(s[2]=t=>h(l)?l.value=t:null),"current-page":a(y),"onUpdate:current-page":s[3]||(s[3]=t=>h(y)?y.value=t:null),"page-size":a(x),"onUpdate:page-size":s[4]||(s[4]=t=>h(x)?x.value=t:null),columns:a(Y),menu:a($),data:a(N),detail:a(V),"before-open":a(O),onSearch:a(J),onSubmit:a(P),"table-columns":f.value,total:a(U),onLoad:a(v),onSearchReset:L,rules:R,layout:"total, ->, jumper, prev, pager, next, sizes",border:"",stripe:"","show-overflow-tooltip":""},{action:o(()=>[T(k,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=t=>f.value=t)},null,8,["modelValue"])]),menu:o(({row:t,size:r})=>[T(w,{title:d.$t("crud.isDelText"),onConfirm:C=>a(H)(t)},{reference:o(()=>[T(n,{size:r,type:"danger",link:""},{default:o(()=>[u(i(d.$t("crud.delText")),1)]),_:2},1032,["size"])]),_:2},1032,["title","onConfirm"])]),"table-association_role":o(({row:t,column:r,$index:C})=>[t.association_role.id==="***"?(c(),b(D,{key:0,type:"danger"},{default:o(()=>[u(i(a(e)("system.users.association_role_delete")),1)]),_:1})):(c(),b(D,{key:1},{default:o(()=>[u(i(a(S).locales==="en-us"?t.association_role.name_en_us:t.association_role.name_zh_cn),1)]),_:2},1024))]),"table-disabled":o(({row:t,column:r,$index:C})=>[u(i(d.$t(`selectBool.${t.disabled}`)),1)]),"detail-association_role":o(({size:t,item:r})=>[r.association_role.id==="***"?(c(),B("div",se,[m("span",oe,i(a(e)("system.users.association_role_delete")),1)])):(c(),B("div",re,[m("li",null,[le,m("span",null,i(r.association_role.id),1)]),m("li",null,[ne,m("span",null,i(a(S).locales==="en-us"?r.association_role.name_en_us:r.association_role.name_zh_cn),1)])]))]),"detail-disabled":o(({size:t,item:r})=>[u(i(d.$t(`selectBool.${r.disabled}`)),1)]),_:1},8,["modelValue","search","current-page","page-size","columns","menu","data","detail","before-open","onSearch","onSubmit","table-columns","total","onLoad"])),[[j,a(F)]])]),_:1})}}});export{pe as default};
