import{d as E,a as G,u as j,M as K,r as M,N as Q,m as W,A as _,e as c,q as b,w as o,O as X,i as a,G as f,g as T,s as u,t as i,f as $,h as m,n as p,P as Z,U as ee}from"./index.305d1985.js";import{u as te}from"./crud.5df62e72.js";import ae from"./index.341eb94c.js";const se={key:0},oe={class:"text-red-600"},re={key:1},de=E({__name:"index",setup(le){const{t:e}=G(),Y=j(),B=K({label:e("crud.label"),addText:e("crud.addText"),detailText:e("crud.detailText"),editText:e("crud.editText"),searchText:e("crud.searchText"),searchResetText:e("crud.searchResetText"),submitText:e("crud.submitText"),resetText:e("crud.resetText"),detail:!0,edit:!0,del:!1,searchReset:!0,fixed:"right",width:"200"}),N=M([{value:!0,label:e("selectBool.true")},{value:!1,label:e("selectBool.false")}]),D=Q([{label:e("system.users.uid"),prop:"uid",component:"el-input",detail:!0,props:{disabled:!0},width:"200"},{label:e("system.users.username"),prop:"username",component:"el-input",form:!0,search:!0,detail:!0,width:"200"},{label:e("system.users.name"),prop:"name",component:"el-input",detail:!0,width:"200"},{label:e("system.users.mail"),prop:"mail",component:"el-input",search:!0,detail:!0,width:"200"},{label:e("system.users.company"),prop:"company",component:"el-input",detail:!0,width:"200"},{label:e("system.users.department"),prop:"department",component:"el-input",detail:!0,width:"200"},{label:e("system.users.disabled"),prop:"disabled",component:"pro-select",form:!0,search:!0,detail:!0,props:{data:N.value},width:"200"},{label:e("system.users.association_role"),prop:"association_role",component:W(ae),search:!0,form:!0,detail:!0,width:"200"},{label:e("el-date-picker.create_at"),prop:"create_at",component:"el-date-picker",props:{type:"datetimerange",rangeSeparator:"-",startPlaceholder:"start",endPlaceholder:"end",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DDTHH:mm:ss"},search:!0,detail:!0,width:"200"},{label:e("el-date-picker.update_at"),prop:"update_at",component:"el-date-picker",props:{type:"datetimerange",rangeSeparator:"-",startPlaceholder:"start",endPlaceholder:"end",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DDTHH:mm:ss"},search:!0,detail:!0,width:"200"}]),h=M(JSON.parse(JSON.stringify(D))),V={username:{required:!0,message:e("rules.users.username"),trigger:"blur"},disabled:{required:!0,message:e("rules.users.disabled"),trigger:"blur"},association_role:{required:!0,message:e("rules.users.association_role"),trigger:"blur"}},{form:g,serachForm:l,detail:R,loadList:v,currentPage:y,pageSize:x,list:U,total:C,isFetching:O,beforeOpen:P,submit:F,deleteRow:q}=te(_.usersList,_.usersAdd,_.usersEdit,_.usersDelete,!0),H=ee(async(d,s,S)=>{if(s){let n=JSON.parse(JSON.stringify(l.value)),w={association_role:n.association_role};n.association_role&&(n.association_role_uid=n.association_role.uid,delete n.association_role,l.value=n,console.log(l.value)),await v(),l.value={...l.value,...w}}d()}),J=async()=>{l.value={},await v()};return(d,s)=>{const S=p("pro-column-setting"),n=p("el-button"),w=p("el-popconfirm"),k=p("el-tag"),L=p("pro-crud"),A=p("pro-card"),I=Z("loading");return c(),b(A,{shadow:"never"},{default:o(()=>[X((c(),b(L,{modelValue:a(g),"onUpdate:modelValue":s[1]||(s[1]=t=>f(g)?g.value=t:null),search:a(l),"onUpdate:search":s[2]||(s[2]=t=>f(l)?l.value=t:null),"current-page":a(y),"onUpdate:current-page":s[3]||(s[3]=t=>f(y)?y.value=t:null),"page-size":a(x),"onUpdate:page-size":s[4]||(s[4]=t=>f(x)?x.value=t:null),columns:a(D),menu:a(B),data:a(U),detail:a(R),"before-open":a(P),onSearch:a(H),onSubmit:a(F),"table-columns":h.value,total:a(C),onLoad:a(v),onSearchReset:J,rules:V,layout:"total, ->, jumper, prev, pager, next, sizes",border:"",stripe:"","show-overflow-tooltip":""},{action:o(()=>[T(S,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t)},null,8,["modelValue"])]),menu:o(({row:t,size:r})=>[T(w,{title:d.$t("crud.isDelText"),onConfirm:z=>a(q)(t)},{reference:o(()=>[T(n,{size:r,type:"danger",link:""},{default:o(()=>[u(i(d.$t("crud.delText")),1)]),_:2},1032,["size"])]),_:2},1032,["title","onConfirm"])]),"table-association_role":o(({row:t,column:r,$index:z})=>[t.association_role.uid==="***"?(c(),b(k,{key:0,type:"danger"},{default:o(()=>[u(i(a(e)("system.users.association_role_delete")),1)]),_:1})):(c(),b(k,{key:1},{default:o(()=>[u(i(a(Y).locales==="en-us"?t.association_role.name_en_us:t.association_role.name_zh_cn),1)]),_:2},1024))]),"table-disabled":o(({row:t,column:r,$index:z})=>[u(i(d.$t(`selectBool.${t.disabled}`)),1)]),"detail-association_role":o(({size:t,item:r})=>[r.association_role.uid==="***"?(c(),$("div",se,[m("span",oe,i(a(e)("system.users.association_role_delete")),1)])):(c(),$("div",re,[m("li",null,[u("UID: "),m("span",null,i(r.association_role.uid),1)]),m("li",null,[u("Name: "),m("span",null,i(a(Y).locales==="en-us"?r.association_role.name_en_us:r.association_role.name_zh_cn),1)])]))]),"detail-disabled":o(({size:t,item:r})=>[u(i(d.$t(`selectBool.${r.disabled}`)),1)]),_:1},8,["modelValue","search","current-page","page-size","columns","menu","data","detail","before-open","onSearch","onSubmit","table-columns","total","onLoad"])),[[I,a(O)]])]),_:1})}}});export{de as default};
