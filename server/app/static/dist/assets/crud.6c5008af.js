import{r as a,f as P,g as F,y as R,D as S,V as O,n as y,W as V,X as B,Y as E}from"./index.90662b97.js";function Y(f,v=!1){const n=a([]),{isFetching:l,data:c,execute:o}=F(f),s=async()=>{l.value||(await o(),c.value&&(n.value=c.value))};return y(v)&&s(),{list:n,loadAll:s,isFetching:l}}function j(f,v,n,l,c=!1){const o=a({}),s=P({id:""}),x=a(1),w=a(10),p=a([]),m=a(0),r=a({}),d=a({current_page:x.value,page_size:w.value}),{isFetching:h,data:g,execute:C}=F(f,d),{execute:D}=R(v,r),{execute:_}=S(n,r),{execute:b}=O(l,s),u=async()=>{h.value||(d.value.current_page=x.value,d.value.page_size=w.value,await C(),g.value&&(p.value=g.value.data,m.value=g.value.total))};y(c)&&u();const z=V((e,t,i)=>{t==="edit"?r.value=i||{}:t==="detail"&&(o.value=i||{}),e()}),A=B(async(e,t,i)=>{t&&await u(),e()}),L=E(async(e,t,i,I,W)=>{i==="add"?(await D(),e(),t()):i==="edit"&&(await _(),e(),t()),await u()});return{form:r,serachForm:d,detail:o,loadList:u,currentPage:x,pageSize:w,list:p,total:m,isFetching:h,currentRowID:s,beforeOpen:z,submit:L,search:A,deleteRow:async e=>{s.id=e.id,await b(),await u()}}}export{Y as a,j as u};
